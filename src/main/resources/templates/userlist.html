<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>用户列表</title>

<style>
.center {
  text-align: center;
}
.right {
	display:inline;
  text-align: right;
  margin-right: 10px;
  float: right;
}
.left {
	display:inline;
  text-align: left;
  margin-left: 10px;
  float: left;
}

 .clearfix:after {content:"."; display:block; height:0; visibility:hidden; clear:both; }
  .clearfix { *zoom:1; }

</style>
</head>
<body>
	<div th:include="header :: head"></div>
	<form id="pageForm" th:action="@{/user/users}" method="get">
		<input type="hidden" id="currentPage" name="currentPage" th:value="${users.currentPage}"/>
		<input type="hidden" id="pageSize" name="pageSize" th:value="${users.pageSize}"/>
	</form>
	<div class="left">
		显示<span th:text = "${users.totalRecord}"></span>条中的第
		<span th:text = "${users.startRow+1}"></span>条
		<span>到第</span>
		<span th:text = "${users.endRow}"></span>条		
	</div>
	<div class="right">
		<!-- <form th:action="@{/user/redirectAddUser}" method = "get">
			<button type="submit" class="btn btn-primary">新增用户</button>
		</form> -->
	<button type="submit" class="btn btn-primary">新增用户</button>
		
	</div>
	<div style="margin-left: 10px;margin-right: 10px;">
		<table class="table table-bordered" >
		<thead>
			<tr>
				<th>用户编号</th>
				<th>用户名</th>
				<th>电子邮箱</th>
				<th>联系电话</th>
				<th>地址</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="user : ${users.list}">
				<td th:text="${user.id}"></td>
				<td th:text="${user.username}"></td>
				<td th:text="${user.email}"></td>
				<td th:text="${user.mobile}"></td>
				<td th:text="${user.address}"></td>
				<td>
					<button type="button" class="btn btn-primary"  data-toggle="modal" data-target="#myModal"
					th:onclick="'javascript: showModel('+${user.id}+')'">分配角色</button>
				</td>
			</tr>
		</tbody>
	</table>
	</div>
	<div class="left">
		每页显示
		<select class="form-control" id ="pageSizeSelect">
			<option th:each="pageSize:${users.pageSizes}" th:text="${pageSize}" th:value="${pageSize}" th:if="${pageSize } == ${users.pageSize}" th:selected="selected"></option>
			<option th:each="pageSize:${users.pageSizes}" th:text="${pageSize}" th:value="${pageSize}" th:if="${pageSize } != ${users.pageSize}"></option>
		</select>
	</div>
	<div class="right">
		<nav aria-label="...">
		<ul class="pagination justify-content-center pagination-lg">
		 	<li th:class="${users.firstPage} ? 'disabled':''" style="display:inline">
                <span th:if="${users.firstPage}">←首页</span>
                <a th:if="${not users.firstPage}" th:href="@{'users?currentPage=1'+'&pageSize='+${users.pageSize}}">←首页</a>
            </li>
		    <li class="page-item" th:each="i : ${#numbers.sequence(1,users.totalPage)}"
		    th:class="(${i}==${users.currentPage})? 'active' : ''" style="display:inline">
		    	<span th:if='${i}==${users.currentPage}' th:text='${i}'></span>
                    <a th:if='${i}!=${users.currentPage}' th:href="@{'users?currentPage=' + ${i} +'&pageSize='+${users.pageSize}}">
                        <span th:text='${i}'></span>
                    </a>
		    </li>
		    <li th:class="${users.lastPage} ? 'disabled':''" style="display:inline">
                <span th:if="${users.lastPage}">尾页➝</span>
                <a th:if="${not users.lastPage}" th:href="@{'users?currentPage=' + ${users.totalPage}+'&pageSize='+${users.pageSize}}">尾页➝</a>
            </li>
	  </ul>
	</nav>
	</div>
	 <button type="button" class="btn btn-default btn-lg" id="button1">Click to hide</button>
      <div class="modal fade" id="myModel" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					&times;
				</button>
				<h4 class="modal-title" id="myModalLabel">
					角色列表
				</h4>
			</div>
			<div class="modal-body">
				<div class="left clearfix" style="border: 2px">
					<div class="list-group ">
					  <a href="#" class="list-group-item active">First item</a>
					  <a href="#" class="list-group-item">Second item</a>
					  <a href="#" class="list-group-item">Third item</a>
					</div>
				</div>
				
				<div class="right clearfix" style="border: 2px">
					<div class="list-group">
					  <a href="#" class="list-group-item active">First item</a>
					  <a href="#" class="list-group-item">Second item</a>
					  <a href="#" class="list-group-item">Third item</a>
					</div>
				</div>
			</div>
			<div class="modal-footer" style="clear:both">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭
				</button>
				<button type="button" class="btn btn-primary">
					提交更改
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
	
	<script type="text/javascript">
		
	$("#pageSizeSelect").change(function(){
		var pageSize = $("#pageSizeSelect").val();
		$("#pageSize").val(pageSize);
		$("#pageForm").submit();
	});
	
	
	// when DOM is ready
	$(document).ready(function () {

	     // Attach Button click event listener 
	    $("#button1").click(function(){

	         // show Modal
	         $('#myModal').modal('show');
	    });
	     
	   
	});
	 function showModel(id){
		alert(id);
		$('#myModel').modal('show');
	}
	</script>
	
</body>
</html>